<div class="nephilim">

    <div class="left">

        <div class="header">

            <img class="puce"/>

            <img class="separator"/>

            <span class="name">{{localize "NEPH5E.pentacle.nom"}}</span>

        </div>

        <div class="pentacle">

            <img src="systems/neph5e/assets/core/pentacle.webp"/>

            <div class="macro" data-id="air" data-sid="air" data-type="ka">
                <img class="circle air"/>
                <div class="tooltip air">
                    <input
                        name="system.ka.air"
                        type="text"
                        value="{{system.ka.air}}"
                        data-dtype="Number"/>
                    <span class="tooltiptext">{{localize "NEPH5E.air"}}</span>
                </div>
                <div class="dice air">
                    <a class="roll-ka" data-element="air" data-scope="actor"><i class="fas fa-dice-d20"></i></a>
                </div>
            </div>

            <div class="macro" data-id="eau" data-sid="eau" data-type="ka">
                <img class="circle eau"/>
                <div class="tooltip eau">
                    <input
                        name="system.ka.eau"
                        type="text"
                        value="{{system.ka.eau}}"
                        data-dtype="Number"/>
                    <span class="tooltiptext">{{localize "NEPH5E.eau"}}</span>
                </div>
                <div class="dice eau">
                    <a class="roll-ka" data-element="eau" data-scope="actor"><i class="fas fa-dice-d20"></i></a>
                </div>
            </div>

            <div class="macro" data-id="feu" data-sid="feu" data-type="ka">
                <img class="circle feu"/>
                <div class="tooltip feu">
                    <input
                        name="system.ka.feu"
                        type="text"
                        value="{{system.ka.feu}}"
                        data-dtype="Number"/>
                    <span class="tooltiptext">{{localize "NEPH5E.feu"}}</span>
                </div>
                <div class="dice feu">
                    <a class="roll-ka" data-element="feu" data-scope="actor"><i class="fas fa-dice-d20"></i></a>
                </div>
            </div>

            <div class="macro" data-id="lune" data-sid="lune" data-type="ka">
                <img class="circle lune"/>
                <div class="tooltip lune">
                    <input
                        name="system.ka.lune"
                        type="text"
                        value="{{system.ka.lune}}"
                        data-dtype="Number"/>
                    <span class="tooltiptext">{{localize "NEPH5E.lune"}}</span>
                </div>
                <div class="dice lune">
                    <a class="roll-ka" data-element="lune" data-scope="actor"><i class="fas fa-dice-d20"></i></a>
                </div>
            </div>

            <div class="macro" data-id="terre" data-sid="terre" data-type="ka">
                <img class="circle terre"/>
                <div class="tooltip terre">
                    <input
                        name="system.ka.terre"
                        type="text"
                        value="{{system.ka.terre}}"
                        data-dtype="Number"/>
                    <span class="tooltiptext">{{localize "NEPH5E.terre"}}</span>
                </div>
                <div class="dice terre">
                    <a class="roll-ka" data-element="terre" data-scope="actor"><i class="fas fa-dice-d20"></i></a>
                </div>
            </div>

        </div>

        <div class="header">

            <img class="puce"/>

            <img class="separator"/>

            <label class="name">{{localize "NEPH5E.chutes"}}</label>

        </div>

        <ol class="chutes">

            {{#with actor.khaiba as |chute|}}
            <li class="chute">

                <label class="name">{{localize "NEPH5E.khaiba"}}{{#if (gt chute.degre 0)}} ({{chute.name}}){{/if}}</label>

                <div class="degres">

                    {{#if (gte chute.degre 1)}}
                    <i class="fa-solid fa-circle khaiba" data-id="1"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba" data-id="1"></i>
                    {{/if}}

                    {{#if (gte chute.degre 2)}}
                    <i class="fa-solid fa-circle khaiba l3" data-id="2"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l3" data-id="2"></i>
                    {{/if}}

                    {{#if (gte chute.degre 3)}}
                    <i class="fa-solid fa-circle khaiba l3" data-id="3"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l3" data-id="3"></i>
                    {{/if}}

                    {{#if (gte chute.degre 4)}}
                    <i class="fa-solid fa-circle khaiba l3" data-id="4"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l3" data-id="4"></i>
                    {{/if}}

                    {{#if (gte chute.degre 5)}}
                    <i class="fa-solid fa-circle khaiba l6" data-id="5"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l6" data-id="5"></i>
                    {{/if}}

                    {{#if (gte chute.degre 6)}}
                    <i class="fa-solid fa-circle khaiba l3" data-id="6"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l3" data-id="6"></i>
                    {{/if}}

                    {{#if (gte chute.degre 7)}}
                    <i class="fa-solid fa-circle khaiba l3" data-id="7"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l3" data-id="7"></i>
                    {{/if}}

                    {{#if (gte chute.degre 8)}}
                    <i class="fa-solid fa-circle khaiba l6r" data-id="8"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l6r" data-id="8"></i>
                    {{/if}}

                    {{#if (gte chute.degre 9)}}
                    <i class="fa-solid fa-circle khaiba l3r" data-id="9"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l3r" data-id="9"></i>
                    {{/if}}

                    {{#if (gte chute.degre 10)}}
                    <i class="fa-solid fa-circle khaiba l6r" data-id="10"></i>
                    {{else}}
                    <i class="fa-regular fa-circle khaiba l6r" data-id="10"></i>
                    {{/if}}

            </li>
            {{/with}}

            {{#with actor.narcose as |chute|}}
            <li class="chute">

                <label class="name">{{localize "NEPH5E.narcose"}}</label>

                <div class="degres">

                    {{#if (gte chute.degre 1)}}
                    <i class="fa-solid fa-circle narcose" data-id="1"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose" data-id="1"></i>
                    {{/if}}

                    {{#if (gte chute.degre 2)}}
                    <i class="fa-solid fa-circle narcose l3" data-id="2"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l3" data-id="2"></i>
                    {{/if}}

                    {{#if (gte chute.degre 3)}}
                    <i class="fa-solid fa-circle narcose l3" data-id="3"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l3" data-id="3"></i>
                    {{/if}}

                    {{#if (gte chute.degre 4)}}
                    <i class="fa-solid fa-circle narcose l3" data-id="4"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l3" data-id="4"></i>
                    {{/if}}

                    {{#if (gte chute.degre 5)}}
                    <i class="fa-solid fa-circle narcose l6" data-id="5"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l6" data-id="5"></i>
                    {{/if}}

                    {{#if (gte chute.degre 6)}}
                    <i class="fa-solid fa-circle narcose l3" data-id="6"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l3" data-id="6"></i>
                    {{/if}}

                    {{#if (gte chute.degre 7)}}
                    <i class="fa-solid fa-circle narcose l3" data-id="7"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l3" data-id="7"></i>
                    {{/if}}

                    {{#if (gte chute.degre 8)}}
                    <i class="fa-solid fa-circle narcose l6r" data-id="8"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l6r" data-id="8"></i>
                    {{/if}}

                    {{#if (gte chute.degre 9)}}
                    <i class="fa-solid fa-circle narcose l3r" data-id="9"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l3r" data-id="9"></i>
                    {{/if}}

                    {{#if (gte chute.degre 10)}}
                    <i class="fa-solid fa-circle narcose l6r" data-id="10"></i>
                    {{else}}
                    <i class="fa-regular fa-circle narcose l6r" data-id="10"></i>
                    {{/if}}
                
                </div>

            </li>
            {{/with}}

            {{#with actor.ombre as |chute|}}
            <li class="chute">

                <label class="name">{{localize "NEPH5E.ombre"}}</label>

                <div class="degres">

                    {{#if (gte chute.degre 1)}}
                    <i class="fa-solid fa-circle ombre" data-id="1"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre" data-id="1"></i>
                    {{/if}}

                    {{#if (gte chute.degre 2)}}
                    <i class="fa-solid fa-circle ombre l3" data-id="2"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l3" data-id="2"></i>
                    {{/if}}

                    {{#if (gte chute.degre 3)}}
                    <i class="fa-solid fa-circle ombre l3" data-id="3"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l3" data-id="3"></i>
                    {{/if}}

                    {{#if (gte chute.degre 4)}}
                    <i class="fa-solid fa-circle ombre l3" data-id="4"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l3" data-id="4"></i>
                    {{/if}}

                    {{#if (gte chute.degre 5)}}
                    <i class="fa-solid fa-circle ombre l6" data-id="5"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l6" data-id="5"></i>
                    {{/if}}

                    {{#if (gte chute.degre 6)}}
                    <i class="fa-solid fa-circle ombre l3" data-id="6"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l3" data-id="6"></i>
                    {{/if}}

                    {{#if (gte chute.degre 7)}}
                    <i class="fa-solid fa-circle ombre l3" data-id="7"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l3" data-id="7"></i>
                    {{/if}}

                    {{#if (gte chute.degre 8)}}
                    <i class="fa-solid fa-circle ombre l6r" data-id="8"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l6r" data-id="8"></i>
                    {{/if}}

                    {{#if (gte chute.degre 9)}}
                    <i class="fa-solid fa-circle ombre l3r" data-id="9"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l3r" data-id="9"></i>
                    {{/if}}

                    {{#if (gte chute.degre 10)}}
                    <i class="fa-solid fa-circle ombre l6r" data-id="10"></i>
                    {{else}}
                    <i class="fa-regular fa-circle ombre l6r" data-id="10"></i>
                    {{/if}}

                </div>

            </li>
            {{/with}}

            {{#with actor.luneNoire as |chute|}}
            <li class="chute">

                <label class="name">{{localize "NEPH5E.entropieLunaire"}}</label>

                <div class="degres">

                    {{#if (gte chute.degre 1)}}
                    <i class="fa-solid fa-circle luneNoire" data-id="1"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire" data-id="1"></i>
                    {{/if}}

                    {{#if (gte chute.degre 2)}}
                    <i class="fa-solid fa-circle luneNoire l3" data-id="2"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l3" data-id="2"></i>
                    {{/if}}

                    {{#if (gte chute.degre 3)}}
                    <i class="fa-solid fa-circle luneNoire l3" data-id="3"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l3" data-id="3"></i>
                    {{/if}}

                    {{#if (gte chute.degre 4)}}
                    <i class="fa-solid fa-circle luneNoire l3" data-id="4"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l3" data-id="4"></i>
                    {{/if}}

                    {{#if (gte chute.degre 5)}}
                    <i class="fa-solid fa-circle luneNoire l6" data-id="5"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l6" data-id="5"></i>
                    {{/if}}

                    {{#if (gte chute.degre 6)}}
                    <i class="fa-solid fa-circle luneNoire l3" data-id="6"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l3" data-id="6"></i>
                    {{/if}}

                    {{#if (gte chute.degre 7)}}
                    <i class="fa-solid fa-circle luneNoire l3" data-id="7"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l3" data-id="7"></i>
                    {{/if}}

                    {{#if (gte chute.degre 8)}}
                    <i class="fa-solid fa-circle luneNoire l6r" data-id="8"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l6r" data-id="8"></i>
                    {{/if}}

                    {{#if (gte chute.degre 9)}}
                    <i class="fa-solid fa-circle luneNoire l3r" data-id="9"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l3r" data-id="9"></i>
                    {{/if}}

                    {{#if (gte chute.degre 10)}}
                    <i class="fa-solid fa-circle luneNoire l6r" data-id="10"></i>
                    {{else}}
                    <i class="fa-regular fa-circle luneNoire l6r" data-id="10"></i>
                    {{/if}}
                
                </div>

            </li>
            {{/with}}

        </ol>

    </div>

    <div class="right">

        {{#with actor.arcanes as |items|}}
        {{#unless (isEmptyCollection items)}}
        <div class="header">

            <img class="puce"/>

            <img class="separator"/>

            <label class="name">{{localize "NEPH5E.arcanes"}}</label>

        </div>

        <ol class="arcanes">

            {{#each items as |item|}}
            {{#if (ne item.degre 0)}}
            <li class="arcane" data-id="{{item.id}}">

                <label class="value">{{item.degre}}</label>

                <div class="name open">
                    <span>{{item.name}}</span>
                </div>

                <a class="roll"><i class="fas fa-dice-d20"></i></a>
  
            </li>
            {{/if}}
            {{/each}}

        </ol>

        {{/unless}}
        {{/with}}

        <div class="header">

            <img class="puce"/>

            <img class="separator"/>

            <label class="name">{{localize "NEPH5E.attributs"}}</label>

        </div>

        <ol class="attributs">

            <li class="attribut">
                <label class="value">{{actor.initiative}}</label>
                <div class="name">
                    <label>{{localize "NEPH5E.initiative"}}</label>
                </div>
            </li>

            <li class="attribut">
                <label class="value">{{actor.mouvement}}</label>
                <div class="name">
                    <label>{{localize "NEPH5E.mouvement"}}</label>
                </div>
            </li>

            <li class="attribut">
                <label class="value">{{actor.dommage}}</label>
                <div class="name">
                    <label>{{localize "NEPH5E.bonusDommage"}}</label>
                </div>
            </li>

            <li class="attribut">
                <label class="value">{{actor.perspicacite}}</label>
                <div class="name">
                    <label>{{localize "NEPH5E.perspicacite"}}</label>
                </div>
            </li>

            <li class="attribut">
                <label class="value">{{actor.recuperation}}</label>
                <div class="name">
                    <label>{{localize "NEPH5E.recuperation"}}</label>
                </div>
            </li>

            <li class="attribut">
                <label class="value">{{actor.voile}}</label>
                <div class="name">
                    <label>{{localize "NEPH5E.voile"}}</label>
                </div>
            </li>

        </ol>

        <div class="stase header-with-value">

            <img class="circle"/>

            <input
                class="degre"
                name="system.stase.ka"
                type="text"
                value="{{system.stase.ka}}"
                data-dtype="Number"/>

            <img class="separator"/>

            <input
                class="name"
                name="system.stase.description"
                type="text"
                value="{{system.stase.description}}"
                data-dtype="String"
                placeholder="Stase"/>

        </div>

        {{#with actor.metamorphe as |item|}}
        <div class="header-with-value">

            <img class="circle"/>

            <div class="degre">{{item.size}}</div>

            <img class="separator"/>

            {{#if item}}
            <label class="name open" data-id="{{item.id}}">{{item.name}}</label>
            {{else}}
            <label class="name">{{localize "ITEM.TypeMetamorphe"}}</label>
            {{/if}}

        </div>

        <ol class="metamorphoses">

            {{#each item.metamorphoses as |metamorphose|}}
            <li class="metamorphose" data-id="{{../id}}" data-index="{{@index}}">

                <i class="formed fa-circle {{#if metamorphose.formed}}fas{{else}}far{{/if}}" ></i>

                <label class="name {{#unless metamorphose.formed}}grey{{/unless}}">{{metamorphose.name}}</label>

                <i class="visible {{#if metamorphose.formed}}fas {{#if metamorphose.visible}}fa-eye-slash{{else}}fa-eye{{/if}}{{else}}hidden{{/if}}"></i>

            </li>
            {{/each}}

        </ol>
        {{/with}}

    </div>

</div>