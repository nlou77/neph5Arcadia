<form class="combat">

    <div class="header">
        <img src="{{actor.img}}"/>
        <span>{{sentence}}</span>
        {{#unless (isNull img)}}
        <img src="{{img}}"/>
        {{/unless}}
    </div>

    <div class="roll">

        <div class="dice">
            <div id="difficulty">{{difficulty}}%</div>
            <div class="roll-dice">
                <a id="roll"><i class="fas fa-dice-d20"></i></a>
            </div>
        </div>

        <div class="absorption">
            <div id="absorption">1 </div>
            <div class="shield">
                <i class="fas fa-shield"></i>
            </div>
        </div>

        <div class="type">
            <select id="rollType" name="rollType" disabled>
                <option value="opposed">{{localize 'NEPH5E.jetOppose'}}</option>
            </select>
        </div>

        <div id="details" class="item-control">
            <span><i class="fas fa-search"></i></span>
        </div>

    </div>

    <table>

        {{#unless (isEmptyCollection manoeuvers)}}
        <tr>
            <td class="manoeuver">
                <select id="manoeuver" name="manoeuver">
                    {{#each manoeuvers as |manoeuver|}}
                    <option
                        {{#if (eq manoeuver.id 'eviter')}}
                        selected
                        {{/if}}
                        value="{{manoeuver.id}}">{{manoeuver.name}}</option>
                    {{/each}}
                </select>
                <div id='times'>
                    <i id='shot-1' class='fa-solid fa-shield checked'></i>
                    <label class='dommage-checkbox' id='shot-2'> 
                        <input class='item-checkbox' id='shot2' type='checkbox' data-dtype='Boolean'/>
                        <i class="fa-regular fa-shield unchecked"></i>
                        <i class="fa-solid fa-shield checked"></i>
                    </label>
                    <label class='dommage-checkbox' id='shot-3'> 
                        <input class='item-checkbox' id='shot3' type='checkbox' data-dtype='Boolean'/>
                        <i class="fa-regular fa-shield unchecked"></i>
                        <i class="fa-solid fa-shield checked"></i>
                    </label>
                    <label class='dommage-checkbox' id='shot-4'> 
                        <input class='item-checkbox' id='shot4' type='checkbox' data-dtype='Boolean'/>
                        <i class="fa-regular fa-shield unchecked"></i>
                        <i class="fa-solid fa-shield checked"></i>
                    </label>
                    <label class='dommage-checkbox' id='shot-5'> 
                        <input class='item-checkbox' id='shot5' type='checkbox' data-dtype='Boolean'/>
                        <i class="fa-regular fa-shield unchecked"></i>
                        <i class="fa-solid fa-shield checked"></i>
                    </label>
                    <label class='dommage-checkbox' id='shot-6'> 
                        <input class='item-checkbox' id='shot6' type='checkbox' data-dtype='Boolean'/>
                        <i class="fa-regular fa-shield unchecked"></i>
                        <i class="fa-solid fa-shield checked"></i>
                    </label>
                </div>
            </td>
            <td id="manoeuverModifier">0</td>
            <td>%</td>
        </tr>
        {{/unless}}

        <tr>
            <td class="label">Modificateur</td>
            <td>
                <input id="modifier" type="Number" value="0"/>
            </td>
            <td>%</td>
        </tr>

        {{#unless (eq blessures 0)}}
        <tr>
            <td class="blessures">
                <select id="blessures" name="blessures">
                    <option value="apply">Appliquer les blessures</option>
                    <option value="ignore">Ignorer les blessures</option>
                </select>
            </td>
            <td id="blessuresModifier">{{blessures}}</td>
            <td>%</td>
        </tr>
        {{/unless}}

        {{#if (nonNull approches)}}
        <tr>
            <td class="approche">
                <select id="approche" name="approche">
                    {{#each approches as |approche|}}
                    <option value="{{approche.name}}">{{approche.label}}</option>
                    {{/each}}
                </select>
            </td>
            <td id="approcheModifier">0</td>
            <td>%</td>
        </tr>
        {{/if}}

        <tr class="hiddable" style="display:none;">
            <td id="vecu" class="label">{{base.name}}</td>
            <td id="base">{{base.difficulty}}</td>
            <td>%</td>
        </tr>

        {{#if (nonNull stunned)}}
        <tr class="hiddable" style="display:none;">
            <td class="label">{{localize stunned.label}}</td>
            <td>{{stunned.modifier}}</td>
            <td>%</td>
        </tr>
        {{/if}}

        {{#if (nonNull attack)}}
        <tr class="hiddable" style="display:none;">
            <td class="label">{{attack.name}}</td>
            <td>{{attack.modifier}}</td>
            <td>%</td>
        </tr>
        {{/if}}

        {{#if (and (nonNull weapon) (ne weapon.system.defense 0))}}
        <tr class="hiddable" style="display:none;">
            <td class="label">{{weapon.name}}</td>
            <td>{{weapon.system.defense}}0</td>
            <td>%</td>
        </tr>
        {{/if}}

    </table>

    <div class="hiddable">
        <p id="description">{{localize "NEPH5E.manoeuvres.eviter.description"}}</p>
    </div>

</form>